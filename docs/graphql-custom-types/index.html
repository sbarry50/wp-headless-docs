<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Guide to working with custom GraphQL types in WP Headless">

        <meta property="og:site_name" content="WP Headless Plugin Framework"/>
        <meta property="og:title" content="Custom GraphQL Types | WP Headless Plugin Framework"/>
        <meta property="og:description" content="Guide to working with custom GraphQL types in WP Headless"/>
        <meta property="og:url" content="https://sbarry50.github.io/wp-headless-docs/docs/graphql-custom-types"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="WP Headless Plugin Framework">
        <meta name="twitter:card" content="summary_large_image">

        
        <title>WP Headless Plugin Framework | Custom GraphQL Types</title>

        <link rel="home" href="https://sbarry50.github.io/wp-headless-docs/">
        <link rel="icon" href="/favicon.ico">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/wp-headless-docs/assets/build/css/main.css?id=b36a6cbcd6112c720cb0">

            </head>

    <body class="flex flex-col justify-between min-h-screen bg-grey-lightest text-grey-darkest leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 mb-8 py-4" role="banner">
            <div class="container flex items-center max-w-4xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/wp-headless-docs/" title="WP Headless Plugin Framework home" class="inline-flex items-center">

                        <h1 class="text-lg md:text-2xl text-blue-darkest font-semibold hover:text-blue-dark my-0 pr-4">WP Headless Plugin Framework</h1>
                    </a>
                </div>

                <div class="flex flex-1 justify-end items-center text-right md:pl-10">
                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue border border-blue h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="w-full flex flex-auto">
            <section class="container max-w-4xl mx-auto px-6 md:px-8 py-4">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="nav-menu hidden lg:block">
            <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/getting-started"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Getting Started
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/installation"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Installation
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/setup"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Setup
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/application-container"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            The Application Container
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/events"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Event Manager
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/view-templates"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            View Templates
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/configuration-files"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Configuration
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/config-providers"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Providers
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-enqueue"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Enqueue
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-callbacks"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Callbacks
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-menus"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Menus
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-submenus"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Submenus
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-sections"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Sections
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-settings"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Settings
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-post-types"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Custom Post Types
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-taxonomies"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Custom Taxonomies
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-meta-boxes"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Meta Boxes
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-meta-fields"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Meta Fields
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-field-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Field Parameters
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-graphql-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            GraphQL Parameters
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/config-graphql-types"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            GraphQL Types
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/graphql"
            class="lvl0 lvl0-active  nav-menu__item hover:text-blue"
        >
            GraphQL
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/graphql-custom-types"
            class="lvl1  active font-semibold text-blue nav-menu__item hover:text-blue"
        >
            Custom Types
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/graphql-resolvers"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Resolvers
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/graphql-config-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Configuration Parameters
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/vue"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Vue.js Integration
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/helper-functions"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Helper Functions
        </a>
    
    </li>
    </ul>
        </nav>

        <div class="w-full lg:w-3/5 break-words pb-16 lg:pl-4" v-pre>
            <h2>Custom GraphQL Types</h2>
<p>Any settings or meta fields that are not one of the following core scalar types will require a custom GraphQL type.</p>
<ul>
<li>Boolean</li>
<li>Id</li>
<li>Integer</li>
<li>Float</li>
<li>String</li>
</ul>
<p>WP GraphQL is packaged with a variety of custom WordPress related GraphQL types which can be found in the <a href="https://github.com/wp-graphql/wp-graphql/tree/master/src/Type">Type folder</a>. You may want to browse through those files to see if one fits your needs before writing your own.</p>
<p>Additionally, WP Headless comes with a <code>MediaDetails</code> object type for image uploads you may also find useful.</p>
<p>If those don't fit your use case, you can add your own type(s) with the <code>graphql-types.php</code> config file.</p>
<p>Each configuration entry will ultimately be passed to WP GraphQL's <code>register_graphql_enum_type()</code>, <code>register_graphql_object_type()</code> or <code>register_graphql_union_type()</code> functions depending on the type so your configurations will be similar to how you would write them if you were working directly with those functions.</p>
<p>Each of those functions take two parameters per the <a href="https://docs.wpgraphql.com/extending/types">WP GraphQL docs</a> - a <code>type_name</code> and a <code>config</code>.</p>
<p>Our configuration entries require three primary arguments, all of which correspond to those functions in some way.</p>
<ul>
<li><code>id</code> - A unique identifier for the type. Gets passed to the relevant function as the <code>type_name</code> parameter. Should be in PascalCase.</li>
<li><code>type</code> - Determines which aforementioned function gets called. Must either be <code>object</code>, <code>enum</code> or <code>union</code> as of now, however WP GraphQL intends to support registering custom <code>scalar</code> and <code>interface</code> types in the future.</li>
<li><code>args</code> - The configuration arguments for the type. Gets passed to the relevant function as the <code>config</code> parameter.</li>
</ul>
<p>Custom GraphQL type configurations can be written in a variety of ways depending on the type and what you are trying to achieve. We are going to use our <a href="https://github.com/sbarry50/wp-headless-movie-demo">Movie Demo plugin</a> as an example here, however it does not adequately cover all the ways GraphQL types can be registered. Please refer to the <a href="https://docs.wpgraphql.com/extending/types">WP GraphQL docs</a> for more details.</p>
<h3>Movie Demo Examples</h3>
<p>Our <a href="https://github.com/sbarry50/wp-headless-movie-demo">Movie Demo plugin</a> registers two custom GraphQL types - an enumumeration type and an object type.</p>
<p>The object type includes the enum type so we will list the enum type first. It also happens to be the simpler of two as we are merely registering a <code>MovieRating</code> type with four possible values. Note that the <code>value</code> values must match the values that will be saved in the database.</p>
<pre><code class="language-php">    [
        'id'   =&gt; 'MovieRating',
        'type' =&gt; 'enum',
        'args' =&gt; [
            'description' =&gt; 'How would you rate this movie?',
            'values'      =&gt; [
                'MUST SEE' =&gt; [
                    'value' =&gt; 'must_see'
                ],
                'WORTH WATCHING' =&gt; [
                    'value' =&gt; 'worth_watching'
                ],
                'ONLY IF BORED' =&gt; [
                    'value' =&gt; 'only_if_bored'
                ],
                'DONT BOTHER' =&gt; [
                    'value' =&gt; 'dont_bother'
                ],
            ],
        ],
    ],</code></pre>
<p>Next we will register a <code>MovieDetails</code> object type which essentially takes all of the meta fields from our <code>movie</code> custom post type and puts them in an object to query via GraphQL. This isn't actually necessary in this particular case since the fields contained within can be queried individually, but it serves as an example of how to work with custom GraphQL types.</p>
<pre><code class="language-php">    [
        'id'   =&gt; 'MovieDetails',
        'type' =&gt; 'object',
        'args' =&gt; [
            'description' =&gt; 'The movie details',
            'fields' =&gt; [
                'title' =&gt; [
                    'type' =&gt; 'String',
                    'description' =&gt; 'The movie title',
                    'resolve' =&gt; function ($movie_details) {
                        return isset($movie_details['title']) ? $movie_details['title'] : null;
                    }
                ],
                'rating' =&gt; [
                    'type' =&gt; 'MovieRating',
                    'description' =&gt; 'How would you rate this movie?',
                    'resolve' =&gt; function ($movie_details) {
                        return isset($movie_details['rating']) ? $movie_details['rating'] : null;
                    }
                ],
                'year' =&gt; [
                    'type' =&gt; 'String',
                    'description' =&gt; 'The year the movie was released.',
                    'resolve' =&gt; function ($movie_details) {
                        return isset($movie_details['year']) ? $movie_details['year'] : null;
                    }
                ],
                'actors' =&gt; [
                    'type' =&gt; [
                        'list_of' =&gt; 'String'
                    ],
                    'description' =&gt; 'The actors who starred in the movie.',
                    'resolve' =&gt; function ($movie_details) {
                        return isset($movie_details['actors']) ? $movie_details['actors'] : null;
                    }
                ],
                'poster' =&gt; [
                    'type' =&gt; 'MediaDetails',
                    'description' =&gt; 'Movie poster details.',
                    'resolve' =&gt; function ($movie_details) {
                        return isset($movie_details['poster']) ? $movie_details['poster'] : null;
                    }
                ],
            ]
        ],
    ]</code></pre>
<p>As you can see, the <code>MovieDetails</code> object type includes several fields, each of which have their own GraphQL types.</p>
<ul>
<li><code>title</code> - The movie title of the <code>String</code> type.</li>
<li><code>rating</code> - The movie rating of the <code>MovieRating</code> enum type we registered earlier.</li>
<li><code>year</code> - The year the movie was released of the <code>String</code> type.</li>
<li><code>actors</code> - The actors who played a role in the movie of the <code>['list_of' =&gt; 'String']</code> type since the cooresponding meta field is saved in the database as an array of strings.</li>
<li><code>poster</code> - The metadata for the movie poster image upload of the <code>MediaDetails</code> object type registered by WP Headless.</li>
</ul>
<p>Each of these fields is resolved by a <code>resolve</code> method in a <code>MovieDetailsGraphQL</code> object that returns each of their respective values in an array which is passed to the anynomous function in each field's <code>resolve</code> parameter. This is covered more extensively in the <a href="/wp-headless-docs/docs/graphql-resolvers">GraphQL resolver section of the docs</a>.</p>        </div>
    </div>
</section>
        </main>

        <script src="/wp-headless-docs/assets/build/js/main.js?id=7606b4544310fae989c8"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-reset">
                <li class="md:mr-2">
                    &copy; <a href="https://tighten.co" title="Tighten website">Tighten</a> 2019.
                </li>

                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>
    </body>
</html>
