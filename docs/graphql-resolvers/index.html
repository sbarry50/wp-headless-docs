<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Guide to creating resolvers for custom GraphQL types in WP Headless">

        <meta property="og:site_name" content="WP Headless Plugin Framework"/>
        <meta property="og:title" content="GraphQL Resolvers | WP Headless Plugin Framework"/>
        <meta property="og:description" content="Guide to creating resolvers for custom GraphQL types in WP Headless"/>
        <meta property="og:url" content="https://sbarry50.github.io/wp-headless-docs/docs/graphql-resolvers"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="WP Headless Plugin Framework">
        <meta name="twitter:card" content="summary_large_image">

        
        <title>WP Headless Plugin Framework | GraphQL Resolvers</title>

        <link rel="home" href="https://sbarry50.github.io/wp-headless-docs/">
        <link rel="icon" href="/favicon.ico">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/wp-headless-docs/assets/build/css/main.css?id=b36a6cbcd6112c720cb0">

            </head>

    <body class="flex flex-col justify-between min-h-screen bg-grey-lightest text-grey-darkest leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 mb-8 py-4" role="banner">
            <div class="container flex items-center max-w-4xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/wp-headless-docs/" title="WP Headless Plugin Framework home" class="inline-flex items-center">

                        <h1 class="text-lg md:text-2xl text-blue-darkest font-semibold hover:text-blue-dark my-0 pr-4">WP Headless Plugin Framework</h1>
                    </a>
                </div>

                <div class="flex flex-1 justify-end items-center text-right md:pl-10">
                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue border border-blue h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="w-full flex flex-auto">
            <section class="container max-w-4xl mx-auto px-6 md:px-8 py-4">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="nav-menu hidden lg:block">
            <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/getting-started"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Getting Started
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/installation"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Installation
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/setup"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Setup
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/application-container"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            The Application Container
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/events"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Event Manager
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/view-templates"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            View Templates
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/configuration-files"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Configuration
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-providers"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Providers
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-enqueue"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Enqueue
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-callbacks"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Callbacks
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-menus"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Menus
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-submenus"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Submenus
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-sections"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Sections
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-settings"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Settings
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-post-types"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Custom Post Types
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-taxonomies"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Custom Taxonomies
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-meta-boxes"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Meta Boxes
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-meta-fields"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Meta Fields
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-field-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Field Parameters
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-graphql-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            GraphQL Parameters
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/config-graphql-types"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            GraphQL Types
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/graphql"
            class="lvl0 lvl0-active  nav-menu__item hover:text-blue"
        >
            GraphQL
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/graphql-custom-types"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Custom Types
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/graphql-resolvers"
            class="lvl1  active font-semibold text-blue nav-menu__item hover:text-blue"
        >
            Resolvers
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/graphql-config-parameters"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Configuration Parameters
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/vue"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Vue.js Integration
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/wp-headless-docs/docs/helper-functions"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Helper Functions
        </a>
    
    </li>
    </ul>
        </nav>

        <div class="w-full lg:w-3/5 break-words pb-16 lg:pl-4" v-pre>
            <h2>Resolvers</h2>
<p>Though they are not always necessary, oftentimes you will need a resolver for resolving the fields within custom GraphQL types. These are usually needed when you have an enum or object type that needs values retrieved from the database or an API so they can be queried.</p>
<p>To write a resolver in WP Headless, you must create a new class within the <code>src</code> folder of the starter plugin that implements the <code>SB2Media\Headless\GraphQLResolverContract</code> interface. This class must contain a <code>resolve()</code> method that accepts the following parameters.</p>
<ul>
<li><code>$config</code> - The GraphQL configuration</li>
<li><code>$value</code> - The value of the setting/meta-field in the WP database</li>
<li><code>$post_id</code> - The WP post unique identifier (optional)</li>
</ul>
<p>The resolve method should return the values of the fields in the custom GraphQL type.</p>
<p>Also don't forget to register these objects in the <a href="/wp-headless-docs/docs/config-providers">providers config</a>.</p>
<h3>Movie Demo Examples</h3>
<p>We can use the Movie Demo plugin's resolvers as an example.</p>
<p>The <code>MovieRatings</code> enum type's resolver is very simple. It merely returns the value of the <code>movie_rating</code> meta field for the relevant WP post ID that is being passed into the resolve method.</p>
<pre><code class="language-php">namespace SB2Media\MovieDemo\Movies;

use SB2Media\Headless\Contracts\GraphQLResolverContract;

class MovieRatingsGraphQL implements GraphQLResolverContract
{
    /**
     * Resolve the movie ratings for GraphQL
     *
     * @since 1.0.0
     * @param array $config
     * @param string|array $value
     * @param integer $post_id
     * @return string
     */
    public function resolve(array $config, $value, int $post_id = null)
    {
        return $value;
    }
}</code></pre>
<p>Resolving the <code>MovieDetails</code> object type is a little more involved however. It requires we retrieve the values for the title, rating, year, actors and posters fields and pass them to the closure set to each's <code>resolve</code> parameter in the <a href="/wp-headless-docs/docs/graphql-custom-types#movie-details-type-config">type configuration</a>. We can achieve this by assigning these values to an array and returning them in the resolver.</p>
<pre><code class="language-php">namespace SB2Media\MovieDemo\Movies;

use SB2Media\Headless\Contracts\GraphQLResolverContract;
use function SB2Media\MovieDemo\app;
use function SB2Media\MovieDemo\config;

class MovieDetailsGraphQL implements GraphQLResolverContract
{
    /**
     * Resolve the movie details for GraphQL
     *
     * @since 1.0.0
     * @param array $config
     * @param string|array $value
     * @param integer $post_id
     * @return array
     */
    public function resolve(array $config, $value, int $post_id = null)
    {
        $movie_details = [];

        $movie_details['title'] = get_post_meta($post_id, 'movie_title', true);
        $movie_details['rating'] = get_post_meta($post_id, 'movie_rating', true);
        $movie_details['year'] = get_post_meta($post_id, 'movie_year', true);
        $movie_details['actors'] = get_post_meta($post_id, 'movie_actors', true);

        $poster_config = config()-&gt;getItem('movie_poster', 'meta-fields');
        $poster_value = get_post_meta($post_id, 'movie_poster', true);
        $movie_details['poster'] = app('media-details-graphql')-&gt;resolve($poster_config, $poster_value);

        return $movie_details;
    }
}</code></pre>
<p>Note that since the poster field is of the <code>MediaDetails</code> object type we can resolve that field with that type's resolver.</p>        </div>
    </div>
</section>
        </main>

        <script src="/wp-headless-docs/assets/build/js/main.js?id=7606b4544310fae989c8"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-reset">
                <li class="md:mr-2">
                    &copy; <a href="https://tighten.co" title="Tighten website">Tighten</a> 2019.
                </li>

                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>
    </body>
</html>
